{"version":3,"sources":["data lazy /^/.//.*//tour//tour/.json$/ groupOptions: {} namespace object","data lazy /^/.//.*//structure/.xml$/ groupOptions: {} namespace object","data lazy /^/.//.*//pages/.json$/ groupOptions: {} namespace object","../ /^/.//.*/.html$/ groupOptions: {} namespace object","site-images/manoflaw.jpg","site-images/page.png","site-images/cc.svg","site-images/by.svg","metadata.ts","containers/SiteContainer.tsx","site-images/manicule-white.png","components/map-view.tsx","containers/HomePage.tsx","components/page-image.tsx","components/page.tsx","components/tour.tsx","components/page-zoom.tsx","components/reader.tsx","components/thumbnail.tsx","components/nav-strip.tsx","containers/ReaderPage.tsx","containers/About.tsx","components/quire.tsx","containers/Structure.tsx","App.tsx","index.tsx","styles/Tour.module.css","styles/Structure.module.css","styles/Reader.module.css","styles/Nav.module.css","styles/Thumbnail.module.css","styles/About.module.css","styles/Map.module.css","styles/Home.module.css","styles/Page.module.css","styles/PageZoom.module.css"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","DEFAULT_EDITION","process","REACT_APP_DEFAULT_EDITION","getMetadata","edition","a","md","Map","tour","structure","pages","set","default","getStructure","getPageData","categoryPalette","data","categories","Array","from","Set","p","category","length","console","error","forEach","pagenum","index","parseInt","page","color","indexOf","signatures","description","tourItem","getTourForPage","filter","item","source","log","quires","book","quire","q","leaves","leaf","l","$","side","n","mode","single","folio_number","conjoin","url","title","author","EditionContext","React","createContext","SiteContainer","children","editionName","useParams","useState","setPages","setStructure","setTour","useEffect","metadata","m","get","Provider","value","Grid","Navbar","inverse","Header","Brand","to","src","alt","className","rel","href","cc","style","height","by","MapView","context","useContext","styles","blocks","values","display","OverlayTrigger","placement","overlay","Tooltip","toString","currentPage","block","background","Glyphicon","glyphicon","glyph","HomePage","home","Row","Col","sm","homeText","im1","imgCircle","width","float","backgroundColor","im2","getImageUrl","num","thumbnail","pad","substr","img","PageImage","setZoom","Image","responsive","onClick","PageViewer","pageImage","tourOpener","Tour","hasPrev","hasNext","nextPage","prevPage","tourHtml","setTourHtml","html","catch","err","prevLink","left","nextLink","right","tourExit","Button","undefined","tourNav","Panel","bsClass","tourPanel","text","dangerouslySetInnerHTML","__html","PageZoom","pageZoom","Well","well","imgContainer","Reader","zoom","Math","max","min","verso","versoIndex","recto","size","hasNextPage","hasPrevPage","useSearchParams","searchParams","tourParam","renderPage","renderLink","dir","bookNav","items","scale","enter","leave","delay","onStart","navstrip","document","getElementById","classList","add","onRest","remove","config","mass","tension","friction","clamp","div","Thumbnail","tref","pos","cls","navThumbnail","isCurrent","tourLabel","hasTour","bookmark","borderBottom","ref","thumbnailImage","backgroundImage","NavArrow","onTriggerScroll","navStripButton","next","prev","role","tabIndex","button","onMouseDown","NavGroup","pageData","groupRef","api","createRef","refs","i","current","getBoundingClientRect","x","center","window","innerWidth","scrollLeft","start","reset","y","onChange","props","navGroup","ButtonGroup","NavStrip","useRef","useSpring","navStripContainer","ReaderPage","pageString","AboutPage","about","accent","Component","ns","Quire","svgRef","leafRefs","drawLines","svg","arrowid","floor","random","innerHTML","conjoinedId","conjoined","lrect","rrect","startx","endx","dist","relativeDistance","leftControlX","rightControlX","path","createElementNS","d","setAttributeNS","appendChild","node","line","setAttribute","debounced","useDebouncedCallback","useLayoutEffect","addEventListener","removeEventListener","xmlns","key","Structure","setLeafSide","describeQuire","folios","inserts","includes","structureNav","quireLabel","App","element","rootElement","hasChildNodes","hydrate","render"],"mappings":"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","file":"static/js/main.456f2cba.chunk.js","sourcesContent":["var map = {\n\t\"./benlowe/tour/tour.json\": [\n\t\t188,\n\t\t29\n\t],\n\t\"./default/tour/tour.json\": [\n\t\t189,\n\t\t31\n\t],\n\t\"./test/tour/tour.json\": [\n\t\t190,\n\t\t33\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 120;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./benlowe/structure.xml\": [\n\t\t191,\n\t\t25\n\t],\n\t\"./default/structure.xml\": [\n\t\t192,\n\t\t26\n\t],\n\t\"./test/structure.xml\": [\n\t\t193,\n\t\t27\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 121;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./benlowe/pages.json\": [\n\t\t194,\n\t\t28\n\t],\n\t\"./default/pages.json\": [\n\t\t195,\n\t\t30\n\t],\n\t\"./test/pages.json\": [\n\t\t196,\n\t\t32\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 122;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./benlowe/tour/121.html\": [\n\t\t197,\n\t\t3\n\t],\n\t\"./benlowe/tour/13.html\": [\n\t\t198,\n\t\t4\n\t],\n\t\"./benlowe/tour/131.html\": [\n\t\t199,\n\t\t5\n\t],\n\t\"./benlowe/tour/161.html\": [\n\t\t200,\n\t\t6\n\t],\n\t\"./benlowe/tour/170.html\": [\n\t\t201,\n\t\t7\n\t],\n\t\"./benlowe/tour/279.html\": [\n\t\t202,\n\t\t8\n\t],\n\t\"./benlowe/tour/309.html\": [\n\t\t203,\n\t\t9\n\t],\n\t\"./benlowe/tour/31.html\": [\n\t\t204,\n\t\t10\n\t],\n\t\"./benlowe/tour/32.html\": [\n\t\t205,\n\t\t11\n\t],\n\t\"./benlowe/tour/320.html\": [\n\t\t206,\n\t\t12\n\t],\n\t\"./benlowe/tour/33.html\": [\n\t\t207,\n\t\t13\n\t],\n\t\"./benlowe/tour/345.html\": [\n\t\t208,\n\t\t14\n\t],\n\t\"./benlowe/tour/59.html\": [\n\t\t209,\n\t\t15\n\t],\n\t\"./benlowe/tour/7.html\": [\n\t\t210,\n\t\t16\n\t],\n\t\"./benlowe/tour/73.html\": [\n\t\t211,\n\t\t17\n\t],\n\t\"./benlowe/tour/85.html\": [\n\t\t212,\n\t\t18\n\t],\n\t\"./benlowe/tour/92.html\": [\n\t\t213,\n\t\t19\n\t],\n\t\"./benlowe/tour/99.html\": [\n\t\t214,\n\t\t20\n\t],\n\t\"./default/tour/5.html\": [\n\t\t215,\n\t\t21\n\t],\n\t\"./default/tour/6.html\": [\n\t\t216,\n\t\t22\n\t],\n\t\"./test/tour/1.html\": [\n\t\t217,\n\t\t23\n\t],\n\t\"./test/tour/2.html\": [\n\t\t218,\n\t\t24\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 182;\nmodule.exports = webpackAsyncContext;","export default __webpack_public_path__ + \"static/media/manoflaw.8083c05d.jpg\";","export default __webpack_public_path__ + \"static/media/page.e5a2a501.png\";","export default __webpack_public_path__ + \"static/media/cc.24b61a95.svg\";","export default __webpack_public_path__ + \"static/media/by.b2193c0b.svg\";","export const DEFAULT_EDITION = process.env.REACT_APP_DEFAULT_EDITION || 'default'\n\nexport const getMetadata = async (edition: EditionName): Promise<Metadata> => {\n    const md: Metadata = new Map()\n\n    const tour = await import(`data/${edition}/tour/tour.json`)\n    const structure = await import(`data/${edition}/structure.xml`)\n    const pages = await import(`data/${edition}/pages.json`)\n\n    md.set(edition, {\n        tour: tour.default,\n        structure: getStructure(structure),\n        pages: getPageData(pages.default, tour.default)\n    })\n\n    return md\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst pastelPalette = [\n    '#8dd3c7',\n    '#ffffb3',\n    '#bebada',\n    '#fb8072',\n    '#80b1d3',\n    '#fdb462',\n    '#b3de69',\n    '#fccde5',\n    '#d9d9d9',\n    '#bc80bd',\n    '#ccebc5',\n    '#ffed6f'\n]\nconst distinctPalette = [\n    '#a6cee3',\n    '#1f78b4',\n    '#b2df8a',\n    '#33a02c',\n    '#fb9a99',\n    '#e31a1c',\n    '#fdbf6f',\n    '#ff7f00',\n    '#cab2d6',\n    '#6a3d9a',\n    '#ffff99',\n    '#b15928'\n]\nconst categoryPalette = distinctPalette\n\nexport type EditionName = string\nexport type Metadata = Map<EditionName, MetadataRecord>\n\nexport type LeafSide = 'recto' | 'verso' | undefined\n\nexport type Page = {\n    index: number\n    signatures: string\n    pagenum: PageNum\n    category: string\n    description: string\n    color?: string\n    tourItem?: TourItem\n}\nexport interface TourItem {\n    item: number\n    page: number\n    leaf?: LeafSide // Populated at render time\n}\nexport type PageNum = number | undefined\nexport type TourData = TourItem[]\nexport type PageData = Map<number, Page>\n\nexport interface LeafPage {\n    index: number\n    pagenum: number\n    side: 'r' | 'v'\n}\nexport interface Leaf {\n    n: string\n    mode: string\n    single: 'true' | 'false'\n    folio_number: string\n    conjoin: string | null\n    page: LeafPage[]\n}\nexport interface Quire {\n    n: string\n    leaf: Leaf[]\n}\n\nexport interface Structure {\n    url?: string\n    title?: string\n    author?: string\n    source?: string\n    quire: Quire[]\n}\nexport type MetadataRecord = {\n    structure: Structure\n    pages: PageData\n    tour: TourData\n}\n\n/* Representation of the looser types that could come in as strings or numbers */\ntype SourcePage = {\n    index: number | string\n    signatures: string\n    pagenum: PageNum | string\n    category: string\n    description: string\n}\n\ninterface SourceStructure {\n    book: {\n        url?: string\n        title?: string\n        author?: string\n        source?: string\n        quire: SourceQuire[]\n    }\n}\ninterface SourceQuire {\n    $: {\n        n: string\n    }\n    leaf: SourceLeaf[]\n}\ninterface SourceLeaf {\n    $: {\n        n: string\n        mode: string\n        single: 'true' | 'false'\n        folio_number: string\n        conjoin: string | null\n    }\n    page: SourceLeafPage[]\n}\ninterface SourceLeafPage {\n    $: {\n        index: string\n        pagenum: string\n        side: 'r' | 'v'\n    }\n}\n\n// get all of the information about the individual pages in the book\nexport const getPageData = (pages: SourcePage[], tour: TourData): PageData => {\n    const data: PageData = new Map()\n    const categories = Array.from(new Set([...pages.map((p) => p.category)]))\n\n    if (categories.length > categoryPalette.length) {\n        console.error(`There are more categories (${categories.length}) than available category colors\n        (${categoryPalette.length})). Either consolidate some categories or add more colors to\n        src/metadata.ts categoryPalette`)\n    }\n\n    pages.forEach((p) => {\n        let pagenum = 0\n        let index = 0\n\n        if (typeof p.pagenum === 'string') {\n            pagenum = parseInt(p.pagenum, 10)\n        } else {\n            pagenum = p.pagenum || 0\n        }\n        if (typeof p.index === 'string') {\n            index = parseInt(p.index, 10)\n        } else {\n            index = p.index\n        }\n        const page = {\n            color: categoryPalette[categories.indexOf(p.category)],\n            index: index,\n            signatures: p.signatures,\n            pagenum: pagenum,\n            category: p.category,\n            description: p.description,\n            tourItem: getTourForPage(tour, index)\n        }\n        data.set(index, page)\n    })\n    return data\n}\n\n// Given an edition, find any possible tour data for a page\nexport const getTourForPage = (tour: TourData, page: number) => {\n    const data = tour.filter((item) => item.page === page)[0]\n    return data\n}\n\n/**\n * Convert a source structure, with string types, to a public structure, with guaranteed numeric types\n *\n * @param structure the source structure in the native XML import format\n */\nexport const getStructure = (source: SourceStructure): Structure => {\n    console.log(source)\n    const quires = source.book.quire.map((q) => {\n        const leaves = q.leaf.map((l) => {\n            const pages = l.page.map((p) => {\n                const page: LeafPage = {\n                    index: parseInt(p.$.index, 10),\n                    pagenum: parseInt(p.$.pagenum, 10),\n                    side: p.$.side\n                }\n                return page\n            })\n            const leaf: Leaf = {\n                n: l.$.n,\n                mode: l.$.mode,\n                single: l.$.single,\n                folio_number: l.$.folio_number,\n                conjoin: l.$.conjoin,\n                page: pages\n            }\n            return leaf\n        })\n        const quire: Quire = {\n            n: q.$.n,\n            leaf: leaves\n        }\n        return quire\n    })\n    const structure: Structure = {\n        url: source.book.url,\n        title: source.book.title,\n        author: source.book.author,\n        source: source.book.source,\n        quire: quires\n    }\n    return structure\n}\n","import 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap/dist/css/bootstrap-theme.css'\n\nimport React from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport { Grid, Navbar } from 'react-bootstrap'\n\nimport cc from 'site-images/cc.svg'\nimport by from 'site-images/by.svg'\nimport manic from 'site-images/manicule-white.png'\n\nimport { PageData, Structure, TourData, EditionName, DEFAULT_EDITION, getMetadata } from 'metadata'\n\ninterface EditionContextProps {\n    edition: EditionName\n    pages: PageData\n    structure: Structure\n    tour: TourData\n}\n\nexport const EditionContext = React.createContext<EditionContextProps>({\n    edition: '',\n    pages: new Map(),\n    structure: { quire: [] },\n    tour: []\n})\n\nconst SiteContainer: React.FC = ({ children }) => {\n    const { editionName } = useParams()\n\n    const [edition] = React.useState<EditionName>(editionName || DEFAULT_EDITION)\n    const [pages, setPages] = React.useState<PageData>()\n    const [structure, setStructure] = React.useState<Structure>()\n    const [tour, setTour] = React.useState<TourData>()\n\n    React.useEffect(() => {\n        getMetadata(edition).then((metadata) => {\n            const m = metadata.get(edition)\n            setPages(m?.pages)\n            setStructure(m?.structure)\n            setTour(m?.tour)\n        })\n    }, [edition])\n\n    // Uncomment to force scroll-to-top when there's a navigation change\n    //\n    // const location = useLocation()\n    // React.useEffect(() => {\n    //     window.scrollTo(0, 0)\n    // }, [location])\n    return pages && structure && tour && edition ? (\n        <EditionContext.Provider\n            value={{\n                edition,\n                pages,\n                structure,\n                tour\n            }}>\n            <Grid>\n                <Navbar inverse>\n                    <Navbar.Header>\n                        <Navbar.Brand>\n                            <li>\n                                <Link to=\"/\">\n                                    <img src={manic} alt=\"Manicule home page\" /> Manicule\n                                </Link>\n                            </li>\n                        </Navbar.Brand>\n                    </Navbar.Header>\n                    <ul className=\"nav navbar-nav\">\n                        <li>\n                            <Link to={`/reader/${edition}`}>Browse</Link>\n                        </li>\n                        <li>\n                            <Link to={`/structure/${edition}`}>Structure</Link>\n                        </li>\n                        <li>\n                            <Link to=\"/about\">About</Link>\n                        </li>\n                    </ul>\n                </Navbar>\n\n                {children}\n\n                <footer>\n                    This work is licensed under a{' '}\n                    <a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\">\n                        Creative Commons Attribution 4.0 International License\n                    </a>{' '}\n                    <img src={cc} alt=\"Creative Commons\" style={{ height: '2em' }} />\n                    <img src={by} alt=\"Attribution\" style={{ height: '2em' }} />\n                </footer>\n            </Grid>\n        </EditionContext.Provider>\n    ) : (\n        <>\n            <h2>Loading {edition}...</h2>\n        </>\n    )\n}\nexport default SiteContainer\n","export default \"data:image/png;base64,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\"","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { OverlayTrigger, Tooltip, Glyphicon } from 'react-bootstrap'\n\nimport { EditionName } from 'metadata'\nimport { EditionContext } from 'containers/SiteContainer'\n\nimport styles from 'styles/Map.module.css'\n\ninterface MapViewProps {\n    page: number\n}\nconst MapView = ({ page }: MapViewProps) => {\n    const context = React.useContext(EditionContext)\n    const pages = context.pages\n    const edition = context.edition as EditionName\n\n    return (\n        <div className={styles.blocks}>\n            {[...pages.values()].map((p) => {\n                const tour = p.tourItem\n                return (\n                    <span key={p.index} style={{ display: 'inline-block' }}>\n                        <OverlayTrigger\n                            placement=\"top\"\n                            overlay={<Tooltip id={p.index.toString()}>{p.category}</Tooltip>}>\n                            <Link to={`/reader/${edition}/${p.index}`}>\n                                <span\n                                    className={`\n                        ${p.index === page ? styles.currentPage : ''}\n                        ${tour ? 'has-tour' : ''}\n                        ${styles.block}\n                        `}\n                                    style={{ background: p.color, color: p.color }}>\n                                    {tour ? (\n                                        <Glyphicon className={styles.glyphicon} glyph=\"bookmark\" />\n                                    ) : (\n                                        '\\u00A0'\n                                    )}\n                                </span>\n                            </Link>\n                        </OverlayTrigger>\n                    </span>\n                )\n            })}\n        </div>\n    )\n}\n\nexport default MapView\n","import React from 'react'\n\nimport { Link } from 'react-router-dom'\nimport { Row, Col, Glyphicon } from 'react-bootstrap'\n\nimport im1 from 'site-images/manoflaw.jpg'\nimport im2 from 'site-images/page.png'\nimport styles from 'styles/Home.module.css'\nimport MapView from 'components/map-view'\n\nconst HomePage = () => {\n    return (\n        <div className={styles.home}>\n            <Row>\n                <Col sm={8}>\n                    <div className={styles.homeText}>\n                        <h1>Canterbury Tales</h1>\n                        <h2>Rosenbach MS 1084/2 (ca 1440)</h2>\n                        <img\n                            src={im1}\n                            className={styles.imgCircle}\n                            width=\"200\"\n                            alt=\"drawing of the Man of Law\"\n                            style={{ float: 'right' }}\n                        />\n                        <p>\n                            This manuscript is an eleven-leaf fragment of Geoffrey Chaucers{' '}\n                            <i>The Canterbury Tales</i>, held at the Rosenbach in Philadelphia,\n                            Pennsylvania. It includes portions of the{' '}\n                            <span\n                                style={{\n                                    backgroundColor: '#2550a1'\n                                }}>\n                                Reeves Tale\n                            </span>\n                            , the{' '}\n                            <span\n                                style={{\n                                    backgroundColor: '#658539'\n                                }}>\n                                Cooks Tale\n                            </span>\n                            , the{' '}\n                            <span\n                                style={{\n                                    backgroundColor: '#963f39'\n                                }}>\n                                Man of Laws Tale\n                            </span>\n                            , the{' '}\n                            <span\n                                style={{\n                                    backgroundColor: '#365414'\n                                }}>\n                                Squires Tale\n                            </span>\n                            , the{' '}\n                            <span\n                                style={{\n                                    backgroundColor: '#876331'\n                                }}>\n                                Canons Yeomans Tale\n                            </span>\n                            , the{' '}\n                            <span\n                                style={{\n                                    backgroundColor: '#b09e8d'\n                                }}>\n                                Tale of Sir Thopas\n                            </span>\n                            , and the{' '}\n                            <span\n                                style={{\n                                    backgroundColor: '#cae1ed'\n                                }}>\n                                Parsons Tale\n                            </span>\n                            . These leaves along with two leaves in the John Rylands Library\n                            (English MS. 63) are all that survive of the Oxford Manuscript.\n                        </p>\n                        <p>\n                            <img\n                                src={im2}\n                                width=\"200\"\n                                alt=\"drawing of the Man of Law\"\n                                style={{ float: 'left' }}\n                            />\n                            This website serves as a demo of the{' '}\n                            <a href=\"https://github.com/wtrettien/manicule\">Manicule web app</a> for\n                            exploring unique books and manuscripts. The <b>Browse</b> view allows\n                            you to read the fragments in order, following the modern pagination on\n                            the leaves and bifolia. Marginal notes beside each facsimile page\n                            indicate which lines from <i>The Canterbury Tales</i> are present; these\n                            notes can be changed by altering the <b>description</b> attribute in{' '}\n                            <b>pages.json</b>. Color-coded categories indicate which tale is\n                            present; these categories can also be changed in <b>pages.json</b> and\n                            the colors updated in <b>metadata.ts</b>. (They have been added by hand\n                            to the paragraph above, to demonstrate how to add styles to this text.)\n                            The <b>Structure</b> view shows where these fragments are conjoined, or\n                            not. This data is stored in <b>structure.xml</b>, which visualizes the\n                            format of a book using the{' '}\n                            <a href=\"https://github.com/leoba/VisColl\">VisColl</a> data model.\n                        </p>\n                        <p>\n                            Images of and information about this manuscript (MS 1084/2) were\n                            accessed via{' '}\n                            <a href=\"http://openn.library.upenn.edu/Data/0028/html/ms_1084_002.html\">\n                                OPenn\n                            </a>\n                            , a repository of CC-licensed high-resolution images of cultural\n                            heritage materials along with machine-readable descriptive and technical\n                            metadata.\n                        </p>\n                        <p>\n                            For instructions on how to install and play with this demo, please see\n                            the README of the source code:{' '}\n                            <a href=\"https://github.com/wtrettien/manicule\">\n                                https://github.com/wtrettien/manicule\n                            </a>\n                        </p>\n                        <p className=\"clear\"></p>\n                    </div>\n                </Col>\n                <Col sm={4}>\n                    <ol>\n                        <li>\n                            <Link to=\"/reader/default/5\">\n                                <Glyphicon glyph=\"bookmark\" /> Tour this edition\n                            </Link>\n                        </li>\n                        <li>\n                            <Link to=\"/structure\">\n                                <Glyphicon glyph=\"book\" /> Explore the books physical structure\n                            </Link>\n                        </li>\n                    </ol>\n                    <MapView page={0} />\n                </Col>\n            </Row>\n        </div>\n    )\n}\n\nexport default HomePage\n","import React from 'react'\n\nimport { Image } from 'react-bootstrap'\n\nimport { EditionName } from 'metadata'\nimport { ZoomModal } from './reader'\n\nexport const getImageUrl = (edition: EditionName, num: number, thumbnail = false) => {\n    const pad = `0000${num}`.substr(-4, 4)\n    const img = thumbnail\n        ? `${process.env.PUBLIC_URL}/images/book/${edition}/thumbnails/${pad}.jpg`\n        : `${process.env.PUBLIC_URL}/images/book/${edition}/${pad}.jpg`\n    return img\n}\n\ninterface PageImageProps {\n    edition: EditionName\n    num: number\n    setZoom: (_: ZoomModal) => void\n}\nconst PageImage = ({ edition, num, setZoom }: PageImageProps) => {\n    const img = getImageUrl(edition, num)\n    return (\n        <>\n            <Image\n                src={img}\n                alt={`Manuscript image ${num} for edition ${edition}`}\n                responsive\n                onClick={() => setZoom(num)}\n            />\n        </>\n    )\n}\n\nexport default PageImage\n","// Viewer for a single page (of a spread)\nimport React from 'react'\nimport { Row, Col, Glyphicon } from 'react-bootstrap'\n\nimport { EditionContext } from 'containers/SiteContainer'\nimport { LeafSide, Page as PageType } from 'metadata'\nimport styles from 'styles/Page.module.css'\n\nimport PageImage from './page-image'\nimport { TourModal, ZoomModal } from './reader'\n\ninterface PageProps {\n    page: PageType\n    leaf: LeafSide\n    setZoom: (_: ZoomModal) => void\n    setTour: (_: TourModal) => void\n}\nconst PageViewer = ({ page, leaf, setZoom, setTour }: PageProps) => {\n    const context = React.useContext(EditionContext)\n    const edition = context.edition as string\n\n    const tour = page.tourItem\n    if (tour) {\n        tour.leaf = leaf\n    }\n    const pageImage = <PageImage num={page.index} edition={edition} setZoom={setZoom} />\n\n    return (\n        <div className={styles.metadata}>\n            <Row>\n                {leaf === 'recto' && (\n                    <Col sm={8}>\n                        {pageImage}\n                        <label\n                            className=\"metadata-label category-label\"\n                            style={{ background: page.color }}>\n                            {page.category}\n                        </label>\n                    </Col>\n                )}\n                <Col sm={4}>\n                    {/* Show the tour icon if available */}\n                    {tour ? (\n                        <label\n                            className=\"metadata-label tour-label\"\n                            onClick={() => setTour(tour)}\n                            style={{ color: page.color }}>\n                            <Glyphicon glyph=\"bookmark\" className={styles.tourOpener} />\n                        </label>\n                    ) : (\n                        <span>&nbsp;</span>\n                    )}\n\n                    <label className={`metadata-label description-label ${styles.description}`}>\n                        {page.description}\n                    </label>\n                    <label className=\"metadata-label signatures-label\">{page.signatures}</label>\n                </Col>\n                {leaf === 'verso' && (\n                    <Col sm={8}>\n                        {pageImage}\n                        <label\n                            className=\"metadata-label category-label\"\n                            style={{ background: page.color }}>\n                            {page.category}\n                        </label>\n                    </Col>\n                )}\n            </Row>\n        </div>\n    )\n}\n\nexport default PageViewer\n","import React from 'react'\n\nimport { Row, Col, Panel, Button, Glyphicon } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\n\nimport { TourItem, LeafSide } from 'metadata'\nimport { EditionContext } from 'containers/SiteContainer'\nimport styles from 'styles/Tour.module.css'\n\nimport { TourModal } from './reader'\n\n/**\n * Tour: an annotated popup that can appear next to page information.\n *\n * Tours are provided by specifying a JSON file, tour.json, that correlates a tour HTML\n * blob with a specific page in the manuscript. This HTML page will be loaded as-is and imported\n * into the tour modal.\n *\n * Reference images from within a tour page relative to the root of the public/ folder,\n * but exclude the \"public\" part of the path.\n *\n * @example for the real file public/images/book/default/tour/caxton.jpg:\n *\n *     <img\n *       src=\"images/book/default/tour/caxton.jpg\"\n *       alt=\"Caxton's woodcut of the Cook\" />\n *\n * @param item The Tour item from the JSON file\n * @param side Recto or Verso; the side of the page on which the tour item will be displayed\n * @param setTour the state setter to control opening or closing the tour modal\n * @returns the tour modal\n */\n\ninterface TourProps {\n    item: TourItem\n    side: LeafSide\n    setTour: (_: TourModal) => void\n}\nconst Tour = ({ item, side, setTour }: TourProps) => {\n    const { edition, tour, pages } = React.useContext(EditionContext)\n    const index = tour.indexOf(item)\n\n    const hasPrev = index > 0\n    const hasNext = index < tour.length - 1\n\n    const nextPage = () => pages.get(tour[index + 1].page)?.index\n    const prevPage = () => pages.get(tour[index - 1].page)?.index\n\n    const [tourHtml, setTourHtml] = React.useState(null)\n\n    // Open the tour HTML as raw data, to avoid interpolating any tags inside like images\n    React.useEffect(() => {\n        import(`!!raw-loader!../data/${edition}/tour/${item.page}.html`)\n            .then((html) => {\n                setTourHtml(html.default)\n            })\n            .catch((err) => console.error(err))\n    }, [edition, item.page])\n\n    const prevLink = hasPrev ? (\n        <Link\n            to={`/reader/${edition}/${prevPage()}?tour=${prevPage()}`}\n            className={`${styles.left}`}>\n            <Glyphicon glyph=\"arrow-left\" /> Previous Tour Stop\n        </Link>\n    ) : null\n\n    const nextLink = hasNext ? (\n        <Link\n            to={`/reader/${edition}/${nextPage()}?tour=${nextPage()}`}\n            className={`${styles.right}`}>\n            Next Tour Stop <Glyphicon glyph=\"arrow-right\" />\n        </Link>\n    ) : null\n\n    const tourExit = (\n        <div className={styles.tourExit}>\n            <Button className=\"close-modal\" onClick={() => setTour(undefined)}>\n                <Glyphicon glyph=\"remove\" />\n            </Button>\n        </div>\n    )\n\n    const tourNav = (\n        <div className={styles.tourNav}>\n            <Row>\n                <Col sm={6}>{prevLink}</Col>\n                <Col sm={6}>{nextLink}</Col>\n            </Row>\n        </div>\n    )\n\n    return tourHtml ? (\n        // Display the panel on the opposite side of the screen relative to the page\n        // referred to by the tour\n        <Panel bsClass={styles.tourPanel} className={side === 'recto' ? styles.left : styles.right}>\n            {tourExit}\n            <div className={styles.text} dangerouslySetInnerHTML={{ __html: tourHtml }} />\n            {tourNav}\n        </Panel>\n    ) : null\n}\n\nexport default Tour\n","import React from 'react'\n\nimport { Panel, Well, Image, Button } from 'react-bootstrap'\n\nimport styles from 'styles/PageZoom.module.css'\n\ninterface PageZoomProps {\n    url: string\n    setZoom: (_: any) => void\n}\nconst PageZoom = ({ url, setZoom }: PageZoomProps) => (\n    <Panel className={styles.pageZoom}>\n        <Well className={styles.well}>\n            <label>\n                Scroll around this pop-up to examine the page in detail.\n                <Button onClick={() => setZoom(undefined)}>Close</Button>\n            </label>\n        </Well>\n        <div className={styles.imgContainer}>\n            <Image src={url} alt=\"Manuscript page\" />\n        </div>\n    </Panel>\n)\n\nexport default PageZoom\n","// Reader for the book\nimport React from 'react'\nimport { animated, Transition } from 'react-spring'\nimport { Row, Col, Glyphicon } from 'react-bootstrap'\nimport { Link, useSearchParams } from 'react-router-dom'\n\nimport { EditionContext } from 'containers/SiteContainer'\n\nimport { TourItem, Page as PageType, LeafSide } from 'metadata'\nimport styles from 'styles/Reader.module.css'\n\nimport Page from './page'\nimport Tour from './tour'\n\nimport { getImageUrl } from './page-image'\nimport PageZoom from './page-zoom'\n\ninterface ReaderProps {\n    page: number\n}\n\nexport type pageDir = 'next' | 'prev'\nexport type pageNum = number | null | undefined\n\nexport type TourModal = TourItem | undefined\nexport type ZoomModal = number | undefined\n\nconst Reader = ({ page }: ReaderProps) => {\n    const { pages, edition } = React.useContext(EditionContext)\n    const [tour, setTour] = React.useState<TourModal>(undefined)\n    const [zoom, setZoom] = React.useState<ZoomModal>(undefined)\n\n    const nextPage = Math.max(page + 2, 1)\n    const prevPage = Math.min(page - 2, Object.keys(pages).length)\n    const verso = pages.get(page)\n    const versoIndex = verso?.index || 0\n\n    const recto = versoIndex + 1 < pages.size ? pages.get(versoIndex + 1) : null\n    const hasNextPage = page < pages.size - 1 // Subtract one for the extra element\n    const hasPrevPage = page > 1\n\n    const [searchParams] = useSearchParams()\n\n    // When the page renders, if the tour modal is open, update it\n    React.useEffect(() => {\n        const tourParam = searchParams.get('tour')\n        if (tourParam) {\n            setTour(pages.get(parseInt(tourParam as string, 10))?.tourItem)\n        } else {\n            setTour(undefined)\n        }\n    }, [pages, searchParams])\n\n    const renderPage = (page: PageType, leaf: LeafSide) => {\n        return <Page page={page} leaf={leaf} setZoom={setZoom} setTour={setTour} />\n    }\n\n    const renderLink = (page: pageNum, dir: pageDir) => {\n        if (dir === 'prev' && hasPrevPage) {\n            return (\n                <Link\n                    to={`/reader/${edition}/${page}`}\n                    className={`${styles.bookNav} ${styles.left}`}>\n                    <Glyphicon glyph=\"arrow-left\" /> Previous Spread\n                </Link>\n            )\n        } else if (dir === 'next' && hasNextPage) {\n            return (\n                <Link\n                    to={`/reader/${edition}/${page}`}\n                    className={`${styles.bookNav} ${styles.right}`}>\n                    Next Spread <Glyphicon glyph=\"arrow-right\" />\n                </Link>\n            )\n        }\n        return null\n    }\n\n    return (\n        <>\n            <Row>\n                <Col sm={6}>{renderLink(prevPage, 'prev')}</Col>\n                <Col sm={6}>{renderLink(nextPage, 'next')}</Col>\n            </Row>\n\n            <Row>\n                <Col sm={6} className={styles.verso}>\n                    {verso && renderPage(verso, 'verso')}\n                </Col>\n                <Col sm={6} className={styles.recto}>\n                    {recto && renderPage(recto, 'recto')}\n                </Col>\n                {tour && <Tour side={tour.leaf} item={tour} setTour={setTour} />}\n\n                <Transition\n                    items={zoom}\n                    from={{ scale: 0 }}\n                    enter={{ scale: 1 }}\n                    leave={{ scale: 0 }}\n                    delay={0}\n                    onStart={() => {\n                        const navstrip = document.getElementById('nav-strip')\n                        navstrip?.classList.add('inactive')\n                    }}\n                    onRest={() => {\n                        const navstrip = document.getElementById('nav-strip')\n                        navstrip?.classList.remove('inactive')\n                    }}\n                    config={{ mass: 1, tension: 210, friction: 20, clamp: true }}>\n                    {(styles, item) =>\n                        item && (\n                            <animated.div style={styles}>\n                                <PageZoom\n                                    url={getImageUrl(edition, zoom as number, false)}\n                                    setZoom={setZoom}\n                                />\n                            </animated.div>\n                        )\n                    }\n                </Transition>\n            </Row>\n        </>\n    )\n}\n\nexport default Reader\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { OverlayTrigger, Tooltip, Button, Glyphicon } from 'react-bootstrap'\n\nimport { EditionContext } from 'containers/SiteContainer'\nimport { EditionName, Page } from 'metadata'\nimport styles from 'styles/Thumbnail.module.css'\n\nimport { getImageUrl } from './page-image'\n\ninterface ThumbnailProps {\n    page: Page\n    tref?: React.RefObject<HTMLDivElement>\n}\nconst Thumbnail = ({ page, tref }: ThumbnailProps) => {\n    const { index, color, signatures, category } = page\n    const edition = React.useContext(EditionContext).edition as EditionName\n\n    const pos = index % 2 === 0 ? 'recto' : 'verso'\n    const img = getImageUrl(edition, index, true)\n\n    const cls = `${styles.navThumbnail} thumbnail-${index} ${pos} ${\n        index === page.index || index === page.index + 1 ? styles.isCurrent : ''\n    }`\n    const tour = page.tourItem\n\n    const tourLabel = tour ? (\n        <label className={`metadata-label tour-label has-tour ${styles.hasTour}`}>\n            <span style={{ color: `${color}` }}>\n                <Glyphicon glyph=\"bookmark\" className={styles.bookmark} />\n            </span>\n        </label>\n    ) : null\n\n    return (\n        <div className={cls} style={{ borderBottom: `10px solid ${color}` }} ref={tref}>\n            <OverlayTrigger\n                key={page.index}\n                placement=\"top\"\n                overlay={\n                    <Tooltip id={index as unknown as string}>\n                        {signatures} - {category}\n                    </Tooltip>\n                }>\n                <Link to={`/reader/${edition}/${index}`}>\n                    <Button\n                        id={`page-${index}`}\n                        bsClass={styles.thumbnailImage}\n                        style={{ backgroundImage: `url(${img})` }}></Button>\n                    {tourLabel}\n                </Link>\n            </OverlayTrigger>\n        </div>\n    )\n}\n\nexport default Thumbnail\n","import React from 'react'\nimport { animated, SpringRef, useSpring } from 'react-spring'\n\nimport { ButtonGroup } from 'react-bootstrap'\n\nimport styles from 'styles/Nav.module.css'\nimport { Page, PageData } from 'metadata'\n\nimport Thumbnail from './thumbnail'\nimport { pageDir } from './reader'\n\ninterface NavStripProps {\n    page: number\n    pageData: PageData\n}\ntype Dir = 'next' | 'prev'\n\nconst NavStrip = ({ page, pageData }: NavStripProps) => {\n    const groupRef = React.useRef<HTMLDivElement>(null)\n    const [, api] = useSpring(() => ({ from: { y: 0 }, to: { y: 0 } }))\n\n    const onTriggerScroll = (dir: Dir) => {\n        if (groupRef.current) {\n            const center = window.innerWidth / 2\n            const current = groupRef.current.scrollLeft\n            api.start({\n                reset: true,\n                from: { y: groupRef.current.scrollLeft },\n                to: { y: dir === 'prev' ? current - center : current + center },\n                onChange: (props) => {\n                    if (groupRef.current) {\n                        groupRef.current.scrollLeft = props.value.y\n                    }\n                }\n            })\n        }\n    }\n\n    return (\n        <div id=\"nav-strip\" className={styles.navStripContainer}>\n            {page > 1 && <NavArrow dir=\"prev\" onTriggerScroll={onTriggerScroll} />}\n\n            <NavGroup pageData={pageData} page={page} groupRef={groupRef} api={api} />\n\n            {page < Array.from(pageData.keys()).length && (\n                <NavArrow dir=\"next\" onTriggerScroll={onTriggerScroll} />\n            )}\n        </div>\n    )\n}\n\ninterface NavArrowProps {\n    dir: pageDir\n    onTriggerScroll: (dir: Dir) => void\n}\nexport const NavArrow = ({ dir, onTriggerScroll }: NavArrowProps) => (\n    <div className={`${styles.navStripButton} ${dir === 'next' ? styles.next : styles.prev}`}>\n        <div\n            role=\"link\"\n            tabIndex={0}\n            className={styles.button}\n            onMouseDown={() => onTriggerScroll(dir)}>\n            {dir === 'prev' ? '' : ''}\n        </div>\n    </div>\n)\n\ninterface NavGroupProps {\n    pageData: PageData\n    page: number\n    groupRef: React.RefObject<HTMLDivElement>\n    api: SpringRef<{ y: number }>\n}\nconst NavGroup = ({ pageData, page, groupRef, api }: NavGroupProps) => {\n    const [refs] = React.useState(\n        Array.from(pageData.keys()).map(() => React.createRef<HTMLDivElement>())\n    )\n\n    React.useEffect(() => {\n        let index = -1\n        pageData.forEach((p, i) => {\n            if (p.index === page) {\n                index = i\n            }\n        })\n        const ref = refs[index]\n\n        if (ref.current && groupRef.current) {\n            const from = ref.current.getBoundingClientRect().x\n            const center = window.innerWidth / 2\n            const current = groupRef.current.scrollLeft\n            api.start({\n                reset: true,\n                from: { y: groupRef.current.scrollLeft },\n                to: { y: current - (center - from) },\n                onChange: (props) => {\n                    if (groupRef.current) {\n                        groupRef.current.scrollLeft = props.value.y\n                    }\n                }\n            })\n        }\n    }, [api, groupRef, page, pageData, refs])\n    return (\n        <animated.div className={styles.navGroup} ref={groupRef}>\n            <ButtonGroup>\n                {[...pageData.values()].map((p: Page, index: number) => (\n                    <Thumbnail page={p} key={p.index} tref={refs[index]} />\n                ))}\n            </ButtonGroup>\n        </animated.div>\n    )\n}\n\nexport default NavStrip\n","import React from 'react'\nimport { useParams } from 'react-router'\n\nimport Reader from 'components/reader'\nimport NavStrip from 'components/nav-strip'\nimport MapView from 'components/map-view'\n\nimport { EditionContext } from './SiteContainer'\n\nconst ReaderPage = () => {\n    const { pageString } = useParams()\n    const page = parseInt(pageString as string, 10) || 1\n    const context = React.useContext(EditionContext)\n    return (\n        <>\n            <Reader page={page} />\n            <NavStrip page={page} pageData={context.pages} />\n            <MapView page={page} />\n        </>\n    )\n}\n\nexport default ReaderPage\n","// Don't edit this page; edit about.html at the top of the project\nimport React from 'react'\nimport { Row, Col } from 'react-bootstrap'\n\nimport styles from 'styles/About.module.css'\n\nexport default class AboutPage extends React.Component {\n    render() {\n        return (\n            <div className={styles.about}>\n                <Row>\n                    <Col>\n                        <div className=\"about\">\n                            <h1>About Manicule</h1>\n                            <p>\n                                Manicule is a standalone React web application for presenting unique\n                                printed books and manuscripts in digital facsimile. It allows\n                                editors to:\n                            </p>\n                            <h3>\n                                <span className={styles.accent}></span> build guided tours through\n                                a books distinguishing features;\n                            </h3>\n                            <img\n                                src=\"images/tour.png\"\n                                alt=\"Screenshot of the Tour feature of the application, showing multiple windows over the source text\"\n                            />\n                            <h3>\n                                <span className={styles.accent}></span> annotate the edges of\n                                interesting pages with extra information;\n                            </h3>\n                            <img\n                                src=\"images/marginalia.png\"\n                                alt=\"Screenshot showing annotation added in the marginal area of the screen\"\n                            />\n                            <h3>\n                                <span className={styles.accent}></span> categorize and color-code\n                                each page in the facsimile, giving a birds-eye view of a books\n                                main elements;\n                            </h3>\n                            <img\n                                src=\"images/map.png\"\n                                alt=\"Narrow screenshot of the multi-colored 'map' of categorized elements\"\n                            />\n                            <h3 className=\"indent\">\n                                <span className={styles.accent}></span> and visualize the books\n                                structure.\n                            </h3>\n                            <img\n                                src=\"images/structure.png\"\n                                alt=\"Screenshot of the structure visualization, showing arcing lines that illustrate the way the book was bound\"\n                            />\n                            <h1>Credits</h1>\n                            <p>\n                                Manicule was built and designed by{' '}\n                                <a href=\"https://lizadaly.com/\">Liza Daly</a> and{' '}\n                                <a href=\"http://whitneyannetrettien.com/\">Whitney Trettien</a> with\n                                support from the{' '}\n                                <a href=\"https://pricelab.sas.upenn.edu/\">\n                                    Price Lab for Digital Humanities\n                                </a>{' '}\n                                at the University of Pennsylvania.\n                            </p>\n                            <h1>Download</h1>\n                            <p>\n                                Version 1.0 of Manicule was released in October 2018. The source\n                                code is available for reuse under a{' '}\n                                <a href=\"https://creativecommons.org/licenses/by/4.0/\">\n                                    Creative Commons Attribution 4.0 International License\n                                </a>\n                                . Download it here:{' '}\n                                <a href=\"https://github.com/wtrettien/manicule\">\n                                    https://github.com/wtrettien/manicule\n                                </a>\n                                . Instructions for installing, building, and deploying the app are\n                                available in README.md and at the Github repository.\n                            </p>\n                            <p>\n                                Let us know how you use Manicule by emailing Whitney Trettien:{' '}\n                                <b>trettien [at] english [dot] upenn [dot] edu</b>.\n                            </p>\n                        </div>\n                    </Col>\n                </Row>\n            </div>\n        )\n    }\n}\n","import React from 'react'\nimport { useDebouncedCallback } from 'use-debounce'\n\nimport { LeafSide, Quire as IQuire } from 'metadata'\nimport styles from 'styles/Structure.module.css'\nimport { EditionContext } from 'containers/SiteContainer'\n\nimport Thumbnail from './thumbnail'\n\nconst ns = 'http://www.w3.org/2000/svg'\n\n/**\n * Each Quire element will display one or more Leaves.\n */\ninterface QuireProps {\n    quire: IQuire\n    side: LeafSide\n}\nconst Quire = ({ quire, side }: QuireProps) => {\n    const pageData = React.useContext(EditionContext).pages\n\n    const index = side === 'recto' ? 0 : 1\n    const svgRef = React.useRef<SVGSVGElement>(null)\n\n    const [leafRefs] = React.useState(() =>\n        quire.leaf.map((l) => React.createRef<HTMLDivElement>())\n    )\n\n    const drawLines = () => {\n        if (svgRef.current) {\n            const svg = svgRef.current\n            const arrowid = Math.floor(Math.random() * 10000)\n            // Delete any previous svg children\n            svg.innerHTML = `<defs>\n            <marker id=\"id-${arrowid}\" markerWidth=\"10\" markerHeight=\"7\" refX=\"0\" refY=\"3.5\" orient=\"auto\">\n              <polygon points=\"0 0, 10 3.5, 0 7\" />\n            </marker>\n        </defs>`\n            // Get the positions of all the rendered leaf nodes in this quire\n            quire.leaf.forEach((l, i) => {\n                // Does this leaf have a conjoined leaf?\n                const conjoinedId = l.conjoin && l.conjoin > l.n ? l.conjoin : null\n                const conjoined = quire.leaf.filter((l) => l.n === conjoinedId)[0]\n\n                if (conjoinedId) {\n                    const left = leafRefs[i]\n                    const right = leafRefs[quire.leaf.indexOf(conjoined)]\n\n                    if (left?.current && right?.current) {\n                        const lrect = left.current.getBoundingClientRect()\n                        const rrect = right.current.getBoundingClientRect()\n\n                        // Start and end coordinates for the lines\n                        const startx = lrect.x + lrect.width / 2\n                        const starty = 210\n                        const endx = rrect.x + rrect.width / 2\n                        const endy = 210\n\n                        // Control points are based on the midpoint between left and right, plus the offset (`extra`)\n                        const dist = (lrect.x + rrect.x + rrect.width) / 2\n\n                        // Height of the control points should be the same, and relative to the distance between the nodes,\n                        // clamped so they start low enough to see (0) but don't descend into the nodes (150)\n                        const relativeDistance = rrect.x - lrect.x * 1.2\n                        const height = Math.min(Math.max(20, 300 - relativeDistance), 150)\n\n                        const leftControlX = Math.max(dist - dist * 4, startx)\n                        const rightControlX = Math.min(endx, dist + dist * 4)\n\n                        const path = document.createElementNS(ns, 'path')\n\n                        // Draw a cubic bezier curve with two control points relative to the distance between the nodes\n                        const d = `M ${startx} ${starty} C ${leftControlX} ${height}, ${rightControlX} ${height}, ${endx} ${endy}`\n\n                        path.setAttributeNS(null, 'd', d)\n\n                        svg.appendChild(path)\n                    }\n                } else if (l.single === 'true') {\n                    const node = leafRefs[i]\n                    if (node.current) {\n                        const line = document.createElementNS(ns, 'line')\n                        const { x, width } = node.current.getBoundingClientRect()\n                        const center = x + width / 2\n                        line.setAttribute('x1', `${center}`)\n                        line.setAttribute('x2', `${center}`)\n                        line.setAttribute('y1', `${150}`)\n                        line.setAttribute('y2', `${190}`)\n                        line.setAttribute('marker-end', `url(#id-${arrowid})`)\n                        svg.appendChild(line)\n                    }\n                }\n            })\n        }\n    }\n    const debounced = useDebouncedCallback(drawLines, 100)\n    React.useLayoutEffect(() => {\n        drawLines()\n        window.addEventListener('resize', debounced)\n        return () => {\n            window.removeEventListener('resize', debounced)\n        }\n    })\n    return (\n        <div className={styles.quire}>\n            <svg xmlns={ns} ref={svgRef}></svg>\n            {quire.leaf.map((leaf, i) => {\n                const page = pageData.get(leaf.page[index].index)\n                const key = leaf.folio_number\n                const ref = leafRefs[i]\n\n                return page ? (\n                    <div className={styles.leaf} key={key} ref={ref}>\n                        <Thumbnail page={page} />\n                    </div>\n                ) : null\n            })}\n        </div>\n    )\n}\n\nexport default Quire\n","import React from 'react'\n\nimport { Grid, Button } from 'react-bootstrap'\n\nimport Quire from 'components/quire'\nimport styles from 'styles/Structure.module.css'\n\nimport { Quire as IQuire, LeafSide } from 'metadata'\nimport { EditionContext } from './SiteContainer'\n\nconst Structure = () => {\n    const { structure, pages: pageData } = React.useContext(EditionContext)\n\n    const quires = structure.quire\n\n    const [side, setLeafSide] = React.useState<LeafSide>('recto')\n\n    // Return an English-language representation of the structure\n    const describeQuire = (quire: IQuire) => {\n        const folios = quire.leaf.length\n        let inserts = 0\n\n        quire.leaf.forEach((leaf) => {\n            leaf.page.forEach((page) => {\n                if (pageData.get(page.index)?.signatures.includes('insertion')) {\n                    inserts += 1\n                }\n            })\n        })\n        // Divide the number of inserts by 2 because each page is counted twice\n        inserts /= 2\n\n        return (\n            <label>\n                Contains {folios} folio{folios >= 2 ? 's' : ''}\n                {inserts > 0 ? ` and ${inserts} insertion${inserts > 1 ? 's' : ''}` : ''}\n            </label>\n        )\n    }\n\n    return (\n        <>\n            <div className={styles.structureNav}>\n                <Button\n                    onClick={() => {\n                        console.log(side)\n                        setLeafSide(side === 'recto' ? 'verso' : 'recto')\n                    }}>\n                    Showing {side} side\n                </Button>\n            </div>\n            <Grid className={styles.structure}>\n                {quires.map((quire, index) => (\n                    <div key={index} id={`row-${index}`}>\n                        <div>\n                            <Quire quire={quire} side={side} />\n                        </div>\n                        <div className={styles.quireLabel}>\n                            <h3>Quire: {quire.n}</h3>\n                            {describeQuire(quire)}\n                        </div>\n                    </div>\n                ))}\n            </Grid>\n        </>\n    )\n}\n\nexport default Structure\n","import React from 'react'\nimport { HashRouter, Route, Routes } from 'react-router-dom'\n\nimport HomePage from 'containers/HomePage'\nimport ReaderPage from 'containers/ReaderPage'\nimport SiteContainer from 'containers/SiteContainer'\nimport About from 'containers/About'\nimport Structure from 'containers//Structure'\n\nfunction App() {\n    return (\n        <HashRouter>\n            <Routes>\n                <Route\n                    path=\"\"\n                    element={\n                        <SiteContainer>\n                            <HomePage />\n                        </SiteContainer>\n                    }\n                />\n                <Route\n                    path=\"reader/:editionName/:pageString\"\n                    element={\n                        <SiteContainer>\n                            <ReaderPage />\n                        </SiteContainer>\n                    }\n                />\n                <Route\n                    path=\"reader/:editionName\"\n                    element={\n                        <SiteContainer>\n                            <ReaderPage />\n                        </SiteContainer>\n                    }\n                />\n                <Route\n                    path=\"reader\"\n                    element={\n                        <SiteContainer>\n                            <ReaderPage />\n                        </SiteContainer>\n                    }\n                />\n                <Route\n                    path=\"structure\"\n                    element={\n                        <SiteContainer>\n                            <Structure />\n                        </SiteContainer>\n                    }\n                />\n                <Route\n                    path=\"structure/:editionName\"\n                    element={\n                        <SiteContainer>\n                            <Structure />\n                        </SiteContainer>\n                    }\n                />\n                <Route\n                    path=\"about\"\n                    element={\n                        <SiteContainer>\n                            <About />\n                        </SiteContainer>\n                    }\n                />\n            </Routes>\n        </HashRouter>\n    )\n}\n\nexport default App\n","import React from 'react'\nimport { hydrate, render } from 'react-dom'\nimport App from './App'\n\n// Activate CSS\nimport './styles/main.css'\n\nconst rootElement = document.getElementById('root')\nif (rootElement?.hasChildNodes()) {\n    hydrate(<App />, rootElement)\n} else {\n    render(<App />, rootElement)\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tourPanel\":\"Tour_tourPanel__2bAvc\",\"right\":\"Tour_right__3mj_X\",\"left\":\"Tour_left__3pP0C\",\"text\":\"Tour_text__2ctr9\",\"tourExit\":\"Tour_tourExit__KByyf\",\"tourNav\":\"Tour_tourNav__29EO5\",\"row\":\"Tour_row__R9739\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"structure\":\"Structure_structure__1ZIoz\",\"structureNav\":\"Structure_structureNav__2P-nB\",\"quireLabel\":\"Structure_quireLabel__3sqOG\",\"quire\":\"Structure_quire__3mOtb\",\"leaf\":\"Structure_leaf__PgE9N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bookNav\":\"Reader_bookNav__2xY7y\",\"left\":\"Reader_left__2pvNo\",\"right\":\"Reader_right__2OJ6M\",\"verso\":\"Reader_verso__1lKES\",\"recto\":\"Reader_recto__24Gg4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navGroup\":\"Nav_navGroup__3B1Cy\",\"navStripContainer\":\"Nav_navStripContainer__3D-F0\",\"navStripButton\":\"Nav_navStripButton__UdrJa\",\"button\":\"Nav_button__2Eg1h\",\"next\":\"Nav_next__3grco\",\"prev\":\"Nav_prev__3yWxV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navThumbnail\":\"Thumbnail_navThumbnail__10JDl\",\"recto\":\"Thumbnail_recto__plIcF\",\"isCurrent\":\"Thumbnail_isCurrent__3zFVu\",\"thumbnailImage\":\"Thumbnail_thumbnailImage__2Fsgw\",\"hasTour\":\"Thumbnail_hasTour__2w5iF\",\"bookmark\":\"Thumbnail_bookmark__8NhWw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"about\":\"About_about__2P5xE\",\"accent\":\"About_accent__3lelK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"blocks\":\"Map_blocks__7RRK1\",\"block\":\"Map_block__30Ogi\",\"currentPage\":\"Map_currentPage__14OFD\",\"glyphicon\":\"Map_glyphicon__1ELsi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__2ifuu\",\"imgCircle\":\"Home_imgCircle__3mt0u\",\"homeText\":\"Home_homeText__A_eGk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"metadata\":\"Page_metadata__21bf7\",\"tourOpener\":\"Page_tourOpener__Gt0TI\",\"description\":\"Page_description__UR5a7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageZoom\":\"PageZoom_pageZoom__1ytTL\",\"well\":\"PageZoom_well__1x6ik\",\"imgContainer\":\"PageZoom_imgContainer__2BqaI\"};"],"sourceRoot":""}